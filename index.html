<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pre Medixis Quiz</title>
    <style>
        .pre-medixis-quiz {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 520px;
            margin: 20px auto;
            background: rgba(255, 255, 255, 0.98);
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        
        .quiz-header {
            padding: 8px 10px;
            background: linear-gradient(to right, #4776E6, #8E54E9);
            color: white;
            text-align: center;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .quiz-header h2 {
            font-size: 13px;
            font-weight: bold;
            margin: 0;
        }
        
        .quiz-timer {
            font-size: 11px;
            font-weight: bold;
            background: rgba(0, 0, 0, 0.3);
            padding: 3px 8px;
            border-radius: 12px;
            display: inline-flex;
            align-items: center;
        }
        
        .quiz-timer i {
            margin-right: 4px;
            font-size: 10px;
        }
        
        .quiz-content {
            padding: 10px;
        }
        
        .password-section {
            text-align: center;
            padding: 13px;
        }
        
        .password-input {
            width: 100%;
            padding: 7px;
            margin: 8px 0;
            border: 1.5px solid #ddd;
            border-radius: 5px;
            font-size: 11px;
            text-align: center;
            transition: border-color 0.3s;
            box-sizing: border-box;
        }
        
        .password-input:focus {
            border-color: #4776E6;
            outline: none;
        }
        
        .quiz-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 10px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin: 0 3px;
        }
        
        .btn-primary {
            background: linear-gradient(to right, #4776E6, #8E54E9);
            color: white;
        }
        
        .btn-primary:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }
        
        .quiz-section {
            display: none;
        }
        
        .quiz-question {
            font-size: 12px;
            margin-bottom: 10px;
            color: #333;
            font-weight: 500;
            line-height: 1.3;
            padding: 7px 0;
        }
        
        .options-vertical {
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-bottom: 13px;
        }
        
        .option-row {
            display: flex;
            align-items: center;
            padding: 6px;
            background: #f5f5f5;
            border: 1.5px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            min-height: 25px;
        }
        
        .option-row:hover {
            background: #e9e9e9;
            border-color: #bbb;
        }
        
        .option-row.selected {
            background: #d1e7ff;
            border-color: #4776E6;
            color: #4776E6;
            font-weight: bold;
        }
        
        .option-label {
            font-weight: bold;
            margin-right: 8px;
            min-width: 25px;
            text-align: center;
            font-size: 11px;
        }
        
        .option-text {
            font-size: 10px;
            line-height: 1.2;
        }
        
        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 13px;
            gap: 5px;
        }
        
        .btn-nav {
            padding: 5px 8px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex: 1;
        }
        
        .btn-nav i {
            margin-right: 4px;
            font-size: 9px;
        }
        
        .btn-back {
            background: #6c757d;
            color: white;
        }
        
        .btn-skip {
            background: #ffc107;
            color: #333;
        }
        
        .btn-next {
            background: #28a745;
            color: white;
        }
        
        .btn-submit {
            background: #dc3545;
            color: white;
        }
        
        .progress-container {
            margin-top: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .progress-text {
            font-size: 10px;
            color: #666;
            white-space: nowrap;
        }
        
        .quiz-progress {
            flex-grow: 1;
            background: #e9ecef;
            height: 5px;
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            background: linear-gradient(to right, #4776E6, #8E54E9);
            border-radius: 3px;
            transition: width 0.3s;
        }
        
        .question-counter {
            font-size: 10px;
            color: #666;
            text-align: right;
            margin-top: 4px;
        }
        
        .result-section {
            display: none;
            padding: 13px;
        }
        
        .result-header {
            text-align: center;
            margin-bottom: 13px;
            color: #4776E6;
            font-size: 13px;
        }
        
        .result-summary {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 13px;
            font-size: 11px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 6px;
        }
        
        .result-summary p {
            margin: 3px 0;
            display: flex;
            justify-content: space-between;
        }
        
        .result-details {
            margin-top: 13px;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .result-item {
            background: #f8f9fa;
            padding: 8px;
            border-radius: 4px;
            margin-bottom: 8px;
            font-size: 10px;
        }
        
        .result-question {
            font-weight: bold;
            margin-bottom: 4px;
            display: flex;
            justify-content: space-between;
        }
        
        .result-answer {
            margin: 3px 0;
            padding-left: 8px;
        }
        
        .correct {
            color: #28a745;
        }
        
        .incorrect {
            color: #dc3545;
        }
        
        .reasoning {
            margin-top: 5px;
            padding: 5px;
            background: #e9ecef;
            border-radius: 3px;
            font-size: 9px;
            line-height: 1.3;
        }
        
        .btn-retake {
            display: block;
            width: 100%;
            padding: 7px;
            margin-top: 13px;
            background: linear-gradient(to right, #4776E6, #8E54E9);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 11px;
        }
        
        .btn-retake:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }
        
        .time-progress {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 10px;
        }
        
        .time-progress-bar {
            flex-grow: 1;
            height: 4px;
            background: #e9ecef;
            border-radius: 2px;
            overflow: hidden;
        }
        
        .time-progress-fill {
            height: 100%;
            background: #ffc107;
            border-radius: 2px;
            transition: width 1s linear;
        }
        
        .quiz-info {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 10px;
            color: #666;
        }
        
        /* Font Awesome icons as SVG to avoid external dependency */
        .fa-clock, .fa-hourglass-half, .fa-arrow-left, .fa-forward, 
        .fa-arrow-right, .fa-paper-plane, .fa-check, .fa-redo, .fa-trophy {
            width: 1em;
            height: 1em;
            display: inline-block;
            vertical-align: -0.125em;
        }
    </style>
</head>
<body>
    <div class="pre-medixis-quiz">
        <div class="quiz-header">
            <h2>Pre Medixis</h2>
            <div class="quiz-timer" id="total-timer" style="display: none;">
                <svg class="fa-clock" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm0-320c-13.3 0-24 10.7-24 24v112c0 13.3 10.7 24 24 24s24-10.7 24-24V160c0-13.3-10.7-24-24-24z"></path></svg>
                <span id="total-time">10:00</span>
            </div>
            <div class="quiz-timer" id="question-timer" style="display: none;">
                <svg class="fa-hourglass-half" viewBox="0 0 384 512"><path fill="currentColor" d="M360 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h8V64c0 52.935 42.935 96 96 96h80c53.019 0 96-42.981 96-96h8c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24zm-8 64h-8v32c0 35.29-28.71 64-64 64h-80c-35.29 0-64-28.71-64-64V64h-8V32h320v32zm-64 384h-80c-53.019 0-96-42.981-96-96h-8c-13.255 0-24-10.745-24-24v-16c0-13.255 10.745-24 24-24h8v-32h8c35.29 0 64 28.71 64 64v64h80v-64c0-35.29 28.71-64 64-64h8v32h8c13.255 0 24 10.745 24 24v16c0 13.255-10.745 24-24 24h-8c0 53.019-42.981 96-96 96z"></path></svg>
                <span id="question-time">01:00</span>
            </div>
        </div>
        
        <div class="quiz-content">
            <!-- Password Section -->
            <div class="password-section" id="password-section">
                <p style="font-size: 11px;">Enter password to start the quiz</p>
                <input type="password" class="password-input" id="password-input" placeholder="Enter password">
                <button class="quiz-btn btn-primary" id="start-btn">Start Quiz</button>
            </div>
            
            <!-- Quiz Section -->
            <div class="quiz-section" id="quiz-section">
                <div class="quiz-question" id="question">Question will appear here</div>
                
                <div class="options-vertical" id="options">
                    <!-- Options will be generated here -->
                </div>
                
                <div class="quiz-navigation">
                    <button class="btn-nav btn-back" id="back-btn">
                        <svg class="fa-arrow-left" viewBox="0 0 448 512"><path fill="currentColor" d="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"></path></svg>
                        Back
                    </button>
                    <button class="btn-nav btn-skip" id="skip-btn">
                        <svg class="fa-forward" viewBox="0 0 512 512"><path fill="currentColor" d="M500.5 231.4l-192-160C287.9 54.3 256 68.6 256 96v320c0 27.4 31.9 41.8 52.5 24.6l192-160c15.3-12.8 15.3-36.4 0-49.2zm-256 0l-192-160C31.9 54.3 0 68.6 0 96v320c0 27.4 31.9 41.8 52.5 24.6l192-160c15.3-12.8 15.3-36.4 0-49.2z"></path></svg>
                        Skip
                    </button>
                    <button class="btn-nav btn-next" id="next-btn">
                        Next
                        <svg class="fa-arrow-right" viewBox="0 0 448 512"><path fill="currentColor" d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"></path></svg>
                    </button>
                    <button class="btn-nav btn-submit" id="submit-btn">
                        <svg class="fa-paper-plane" viewBox="0 0 512 512"><path fill="currentColor" d="M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"></path></svg>
                        Submit
                    </button>
                </div>
                
                <div class="progress-container">
                    <div class="progress-text">Progress:</div>
                    <div class="quiz-progress">
                        <div class="progress-bar" id="progress-bar"></div>
                    </div>
                    <div id="progress-percent">0%</div>
                </div>
                
                <div class="time-progress">
                    <div class="progress-text">Question Time:</div>
                    <div class="time-progress-bar">
                        <div class="time-progress-fill" id="time-progress-fill"></div>
                    </div>
                </div>
                
                <div class="quiz-info">
                    <div>Question: <span id="current-question">1</span>/<span id="total-questions">10</span></div>
                    <div>Skipped: <span id="skipped-count">0</span></div>
                </div>
            </div>
            
            <!-- Result Section -->
            <div class="result-section" id="result-section">
                <h2 class="result-header">
                    <svg class="fa-trophy" viewBox="0 0 576 512"><path fill="currentColor" d="M552 64H448V24c0-13.3-10.7-24-24-24H152c-13.3 0-24 10.7-24 24v40H24C10.7 64 0 74.7 0 88v56c0 35.7 22.5 72.4 61.9 100.7 31.5 22.7 69.8 37.1 110 41.7C203.3 338.5 240 360 240 360v72h-48c-35.3 0-64 20.7-64 56v12c0 6.6 5.4 12 12 12h296c6.6 0 12-5.4 12-12v-12c0-35.3-28.7-56-64-56h-48v-72s36.7-21.5 68.1-73.6c40.3-4.6 78.6-19 110-41.7 39.3-28.3 61.9-65 61.9-100.7V88c0-13.3-10.7-24-24-24zM99.3 192.8C74.9 175.2 64 155.6 64 144v-16h64.2c1 32.6 5.8 61.2 12.8 86.2-15.1-5.2-29.2-12.4-41.7-21.4zM512 144c0 16.1-17.7 36.1-35.3 48.8-12.5 9-26.7 16.2-41.8 21.4 7-25 11.8-53.6 12.8-86.2H512v16z"></path></svg>
                    Quiz Results
                </h2>
                
                <div class="result-summary">
                    <p><strong>Total MCQs:</strong> <span id="total-mcqs">0</span></p>
                    <p><strong>Correct:</strong> <span id="correct-answers">0</span></p>
                    <p><strong>Wrong:</strong> <span id="wrong-answers">0</span></p>
                    <p><strong>Skipped:</strong> <span id="skipped-answers">0</span></p>
                    <p><strong>Left:</strong> <span id="left-answers">0</span></p>
                    <p><strong>Percentage:</strong> <span id="percentage">0%</span></p>
                    <p><strong>Time Taken:</strong> <span id="time-taken">00:00</span></p>
                </div>
                
                <h3 style="font-size: 11px; margin-bottom: 6px;">Detailed Results:</h3>
                <div class="result-details" id="result-details">
                    <!-- Result details will be generated here -->
                </div>
                
                <button class="btn-retake" id="retake-btn">
                    <svg class="fa-redo" viewBox="0 0 512 512"><path fill="currentColor" d="M500 8h-27.711c-6.739 0-12.157 5.548-11.997 12.286l2.347 98.568C418.212 52.043 342.256 8 256 8 134.813 8 33.933 94.924 12.296 209.824 10.908 217.193 16.604 224 24.103 224h28.576c5.674 0 10.542-3.982 11.737-9.529C83.441 126.128 161.917 60 256 60c66.645 0 126.942 26.629 171.214 69.857l-94.914 6.801c-6.738.482-12.286 5.901-12.286 11.997V168c0 6.627 5.373 12 12 12h192c6.627 0 12-5.373 12-12V20c0-6.627-5.373-12-12-12zm-12.289 188.286l2.347 98.568C466.065 375.765 389.839 420 304 420c-66.645 0-126.942-26.629-171.214-69.857l94.914-6.801c6.738-.482 12.286-5.901 12.286-11.997V344c0-6.627-5.373-12-12-12H12c-6.627 0-12 5.373-12 12v192c0 6.627 5.373 12 12 12h27.711c6.739 0 12.157-5.548 11.997-12.286l-2.347-98.568C93.788 459.957 169.744 504 256 504c121.187 0 222.067-86.924 243.704-201.824 1.388-7.369-4.308-14.176-11.807-14.176h-28.576c-5.674 0-10.542 3.982-11.737 9.529C428.559 385.872 350.083 452 256 452z"></path></svg>
                    Retake Quiz
                </button>
            </div>
        </div>
    </div>

    <script>
        // Quiz data (first 10 questions from the provided list)
        var quizData = [
            {
                question: "51. The enzyme responsible for breaking down the original HIV RNA genome after reverse transcription is:",
                options: ["Integrase", "Protease", "Ribonuclease (RNAase)", "Reverse Transcriptase"],
                correct: 2,
                reasoning: "Step 4 of the detailed HIV life cycle explicitly states: 'After reverse transcription the genomic RNA is disintegrated by the ribonuclease (RNAase) enzyme.'",
                concept: "HIV replication process"
            },
            {
                question: "52. An example of an opportunistic fungal infection mentioned in the context of AIDS is:",
                options: ["Pulmonary Tuberculosis", "Toxoplasmosis", "Candidiasis of the esophagus", "Recurrent Pneumonia"],
                correct: 2,
                reasoning: "The list of opportunistic invasions includes 'Candidiasis of the esophagus, trachea, bronchi or lungs' as a fungal disease that exploits a weakened immune system.",
                concept: "Opportunistic infections in AIDS"
            },
            {
                question: "53. Which virus is correctly matched with its primary host classification?",
                options: ["Tobacco Mosaic Virus: Animal Virus", "Bacteriophage: Plant Virus", "Poliovirus: Animal Virus", "Potato Yellow Dwarf Virus: Bacteriophage"],
                correct: 2,
                reasoning: "The PDF classifies poliovirus as an example of a spherical virus that causes disease in humans, placing it under 'animal viruses.'",
                concept: "Virus classification"
            },
            {
                question: "54. The 'budding' process in the HIV life cycle results in the new virion:",
                options: ["Losing its envelope and becoming non-infectious.", "Acquiring a lipoprotein envelope derived from the host cell membrane.", "Immediately integrating into the DNA of a new host cell.", "Shedding its capsid to release RNA into the cytoplasm."],
                correct: 1,
                reasoning: "The text states that during budding, the mature virions are released 'enclosing a portion of host cell membrane around them,' forming the viral envelope.",
                concept: "HIV replication process"
            },
            {
                question: "55. The dramatic reduction in the number of functional helper T cells due to HIV infection directly leads to:",
                options: ["An increase in red blood cell production.", "Enhanced communication and activation of other immune cells.", "A deficient immune response against pathogens and cancers.", "The overproduction of antibodies by B cells."],
                correct: 2,
                reasoning: "The document explains that helper T cells regulate immunity by enhancing other immune cells. Their destruction causes 'deficiency of the human immune system,' leading to an inability to fight off diseases.",
                concept: "HIV pathogenesis"
            },
            {
                question: "56. Which of these is a recognized neurological complication of advanced AIDS?",
                options: ["Improved memory and coordination", "Troubles thinking, loss of coordination, and behavioral changes", "Increased production of neurotransmitters", "Strengthening of the blood-brain barrier"],
                correct: 1,
                reasoning: "Under opportunistic invasions, the text lists 'brain impairment' and 'Signs of brain deterioration include troubles thinking, loss of co-ordination and balance and behavioral changes.'",
                concept: "AIDS complications"
            },
            {
                question: "57. The genome of the Hepatitis A virus is classified as:",
                options: ["Double-stranded DNA (dsDNA)", "Single-stranded RNA (ssRNA); serves as mRNA", "Single-stranded RNA (ssRNA); template for DNA synthesis", "Double-stranded RNA (dsRNA)"],
                correct: 1,
                reasoning: "The virus classification section lists 'Picornavirus causes hepatitis A' and, based on the Baltimore system described, picornaviruses have a positive-sense ssRNA genome that can act directly as mRNA.",
                concept: "Virus genome types"
            },
            {
                question: "58. A core principle of HIV prevention is avoiding the transfer of:",
                options: ["All bodily fluids, including sweat and saliva.", "Specific body fluids like blood, semen, vaginal secretions, and breast milk.", "Airborne droplets from coughing and sneezing.", "Genetic material through casual contact."],
                correct: 1,
                reasoning: "The control measures state AIDS can be controlled by preventing the transfer of 'body fluid (blood, serum, semen, etc.)'. It also specifies that saliva, sweat, and casual contact are not routes of transmission.",
                concept: "HIV transmission"
            },
            {
                question: "59. The international system of virus classification prioritizes which of the following characteristics?",
                options: ["The color of the viral crystals and the disease symptoms.", "The name of the scientist who discovered the virus.", "The structure and composition of the virus particle (virion).", "The geographical origin of the virus."],
                correct: 2,
                reasoning: "The document states: 'The internationally agreed system of virus classification is based on the structure and composition of the virus particle (virion).'",
                concept: "Virus classification"
            },
            {
                question: "60. Why is the initial fever and rash in primary HIV infection not a reliable diagnostic tool?",
                options: ["The symptoms are always fatal.", "They are identical to symptoms of many other common viral infections.", "They only appear after decades of infection.", "They are caused by opportunistic infections, not HIV itself."],
                correct: 1,
                reasoning: "The text notes that these early symptoms 'disappear' and that for most people, the first symptoms will not be apparent, highlighting their non-specific nature which resembles flu or mononucleosis.",
                concept: "HIV diagnosis"
            }
        ];

        // DOM Elements
        var passwordSection = document.getElementById('password-section');
        var quizSection = document.getElementById('quiz-section');
        var resultSection = document.getElementById('result-section');
        var passwordInput = document.getElementById('password-input');
        var startBtn = document.getElementById('start-btn');
        var questionElement = document.getElementById('question');
        var optionsElement = document.getElementById('options');
        var backBtn = document.getElementById('back-btn');
        var skipBtn = document.getElementById('skip-btn');
        var nextBtn = document.getElementById('next-btn');
        var submitBtn = document.getElementById('submit-btn');
        var totalTimerElement = document.getElementById('total-timer');
        var questionTimerElement = document.getElementById('question-timer');
        var totalTimeElement = document.getElementById('total-time');
        var questionTimeElement = document.getElementById('question-time');
        var retakeBtn = document.getElementById('retake-btn');
        var progressBar = document.getElementById('progress-bar');
        var progressPercent = document.getElementById('progress-percent');
        var timeProgressFill = document.getElementById('time-progress-fill');
        var currentQuestionElement = document.getElementById('current-question');
        var totalQuestionsElement = document.getElementById('total-questions');
        var skippedCountElement = document.getElementById('skipped-count');
        var timeTakenElement = document.getElementById('time-taken');

        // Quiz state
        var currentQuestion = 0;
        var userAnswers = Array(quizData.length).fill(null);
        var questionTimer;
        var totalTimer;
        var questionTimeLeft = 60;
        var totalTimeLeft = 600; // 10 minutes total for the quiz
        var skipped = 0;
        var quizStarted = false;
        var startTime;

        // Password to start the quiz
        var QUIZ_PASSWORD = "BXM736/?,AXK";

        // Initialize quiz
        function initQuiz() {
            totalQuestionsElement.textContent = quizData.length;
            currentQuestionElement.textContent = currentQuestion + 1;
            skippedCountElement.textContent = skipped;
            totalTimerElement.style.display = 'flex';
            questionTimerElement.style.display = 'flex';
            startTime = new Date();
        }

        // Start button event listener
        startBtn.addEventListener('click', function() {
            if (passwordInput.value === QUIZ_PASSWORD) {
                passwordSection.style.display = 'none';
                quizSection.style.display = 'block';
                quizStarted = true;
                initQuiz();
                loadQuestion();
                startQuestionTimer();
                startTotalTimer();
            } else {
                alert("Incorrect password. Please try again.");
            }
        });

        // Submit button event listener
        submitBtn.addEventListener('click', function() {
            clearInterval(questionTimer);
            clearInterval(totalTimer);
            showResults();
        });

        // Load question function
        function loadQuestion() {
            var question = quizData[currentQuestion];
            questionElement.textContent = question.question;
            
            optionsElement.innerHTML = '';
            var labels = ['A', 'B', 'C', 'D'];
            
            question.options.forEach(function(option, index) {
                var optionRow = document.createElement('div');
                optionRow.classList.add('option-row');
                if (userAnswers[currentQuestion] === index) {
                    optionRow.classList.add('selected');
                }
                
                optionRow.innerHTML = '<div class="option-label">' + labels[index] + '</div><div class="option-text">' + option + '</div>';
                
                optionRow.addEventListener('click', function() {
                    selectOption(index);
                });
                optionsElement.appendChild(optionRow);
            });
            
            updateProgressBar();
            updateNavigationButtons();
            currentQuestionElement.textContent = currentQuestion + 1;
            skippedCountElement.textContent = skipped;
        }

        // Select option function
        function selectOption(index) {
            userAnswers[currentQuestion] = index;
            loadQuestion();
        }

        // Update navigation buttons
        function updateNavigationButtons() {
            backBtn.disabled = currentQuestion === 0;
            skipBtn.disabled = false;
            
            if (currentQuestion === quizData.length - 1) {
                nextBtn.innerHTML = 'Finish <svg class="fa-check" viewBox="0 0 512 512"><path fill="currentColor" d="M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"></path></svg>';
            } else {
                nextBtn.innerHTML = 'Next <svg class="fa-arrow-right" viewBox="0 0 448 512"><path fill="currentColor" d="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z"></path></svg>';
            }
        }

        // Update progress bar
        function updateProgressBar() {
            var progress = ((currentQuestion + 1) / quizData.length) * 100;
            progressBar.style.width = progress + '%';
            progressPercent.textContent = Math.round(progress) + '%';
        }

        // Navigation buttons event listeners
        backBtn.addEventListener('click', function() {
            if (currentQuestion > 0) {
                currentQuestion--;
                resetQuestionTimer();
                loadQuestion();
            }
        });

        skipBtn.addEventListener('click', function() {
            userAnswers[currentQuestion] = null;
            skipped++;
            moveToNextQuestion();
        });

        nextBtn.addEventListener('click', function() {
            if (currentQuestion === quizData.length - 1) {
                clearInterval(questionTimer);
                clearInterval(totalTimer);
                showResults();
            } else {
                moveToNextQuestion();
            }
        });

        // Move to next question
        function moveToNextQuestion() {
            if (currentQuestion < quizData.length - 1) {
                currentQuestion++;
                resetQuestionTimer();
                loadQuestion();
            }
        }

        // Timer functions
        function startQuestionTimer() {
            questionTimeLeft = 60;
            updateQuestionTimerDisplay();
            updateTimeProgressBar();
            questionTimer = setInterval(function() {
                questionTimeLeft--;
                updateQuestionTimerDisplay();
                updateTimeProgressBar();
                
                if (questionTimeLeft <= 0) {
                    clearInterval(questionTimer);
                    moveToNextQuestion();
                }
            }, 1000);
        }

        function startTotalTimer() {
            updateTotalTimerDisplay();
            totalTimer = setInterval(function() {
                totalTimeLeft--;
                updateTotalTimerDisplay();
                
                if (totalTimeLeft <= 0) {
                    clearInterval(questionTimer);
                    clearInterval(totalTimer);
                    showResults();
                }
            }, 1000);
        }

        function resetQuestionTimer() {
            clearInterval(questionTimer);
            startQuestionTimer();
        }

        function updateQuestionTimerDisplay() {
            var minutes = Math.floor(questionTimeLeft / 60);
            var seconds = questionTimeLeft % 60;
            questionTimeElement.textContent = (minutes < 10 ? '0' : '') + minutes + ':' + (seconds < 10 ? '0' : '') + seconds;
            
            // Change color when time is running out
            if (questionTimeLeft < 10) {
                questionTimeElement.style.color = '#ff4d4d';
            } else {
                questionTimeElement.style.color = 'inherit';
            }
        }

        function updateTotalTimerDisplay() {
            var minutes = Math.floor(totalTimeLeft / 60);
            var seconds = totalTimeLeft % 60;
            totalTimeElement.textContent = (minutes < 10 ? '0' : '') + minutes + ':' + (seconds < 10 ? '0' : '') + seconds;
            
            // Change color when time is running out
            if (totalTimeLeft < 60) {
                totalTimeElement.style.color = '#ff4d4d';
            } else {
                totalTimeElement.style.color = 'inherit';
            }
        }

        function updateTimeProgressBar() {
            var progress = (questionTimeLeft / 60) * 100;
            timeProgressFill.style.width = progress + '%';
            
            // Change color when time is running out
            if (questionTimeLeft < 10) {
                timeProgressFill.style.background = '#dc3545';
            } else {
                timeProgressFill.style.background = '#28a745';
            }
        }

        // Calculate time taken
        function calculateTimeTaken() {
            var endTime = new Date();
            var timeDiff = endTime - startTime; // in ms
            var seconds = Math.floor(timeDiff / 1000);
            var minutes = Math.floor(seconds / 60);
            var remainingSeconds = seconds % 60;
            return (minutes < 10 ? '0' : '') + minutes + ':' + (remainingSeconds < 10 ? '0' : '') + remainingSeconds;
        }

        // Show results function
        function showResults() {
            quizSection.style.display = 'none';
            resultSection.style.display = 'block';
            totalTimerElement.style.display = 'none';
            questionTimerElement.style.display = 'none';
            
            var correct = 0;
            var wrong = 0;
            var skipped = 0;
            var left = 0;
            
            userAnswers.forEach(function(answer, index) {
                if (answer === null) {
                    skipped++;
                } else if (answer === quizData[index].correct) {
                    correct++;
                } else {
                    wrong++;
                }
            });
            
            left = quizData.length - (correct + wrong + skipped);
            var percentage = ((correct / quizData.length) * 100).toFixed(2);
            var timeTaken = calculateTimeTaken();
            
            document.getElementById('total-mcqs').textContent = quizData.length;
            document.getElementById('correct-answers').textContent = correct;
            document.getElementById('wrong-answers').textContent = wrong;
            document.getElementById('skipped-answers').textContent = skipped;
            document.getElementById('left-answers').textContent = left;
            document.getElementById('percentage').textContent = percentage + '%';
            timeTakenElement.textContent = timeTaken;
            
            var resultDetails = document.getElementById('result-details');
            resultDetails.innerHTML = '';
            
            quizData.forEach(function(question, index) {
                var userAnswer = userAnswers[index];
                var isCorrect = userAnswer === question.correct;
                
                var resultItem = document.createElement('div');
                resultItem.classList.add('result-item');
                
                var answerStatus = '';
                if (userAnswer === null) {
                    answerStatus = '<span class="incorrect">Skipped</span>';
                } else if (isCorrect) {
                    answerStatus = '<span class="correct">Correct</span>';
                } else {
                    answerStatus = '<span class="incorrect">Incorrect</span>';
                }
                
                resultItem.innerHTML = '<div class="result-question">' + (index + 51) + '. ' + question.question + ' ' + answerStatus + '</div>' +
                    '<div class="result-answer"><strong>Your answer:</strong> ' + (userAnswer !== null ? question.options[userAnswer] : 'Skipped') + '</div>' +
                    '<div class="result-answer correct"><strong>Correct answer:</strong> ' + question.options[question.correct] + '</div>' +
                    '<div class="reasoning"><strong>Reasoning:</strong> ' + question.reasoning + '</div>' +
                    '<div class="reasoning"><strong>Concept:</strong> ' + question.concept + '</div>';
                
                resultDetails.appendChild(resultItem);
            });
        }

        // Retake quiz button
        retakeBtn.addEventListener('click', function() {
            currentQuestion = 0;
            userAnswers = Array(quizData.length).fill(null);
            skipped = 0;
            totalTimeLeft = 600;
            questionTimeLeft = 60;
            
            resultSection.style.display = 'none';
            
            if (quizStarted) {
                quizSection.style.display = 'block';
                initQuiz();
                loadQuestion();
                startQuestionTimer();
                startTotalTimer();
            } else {
                passwordSection.style.display = 'block';
                passwordInput.value = '';
            }
        });

        // Allow pressing Enter to submit password
        passwordInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                startBtn.click();
            }
        });
    </script>
</body>
</html>